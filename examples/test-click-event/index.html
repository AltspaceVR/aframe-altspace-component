<html>
  <head>
    <title>A-Frame Altspace Component - Test Click Event</title>
    <script src="../build.js"></script>
  </head>
  <body>
    <a-scene altspace>
      <a-assets>
        <a-mixin id="cone" geometry="primitive: cone; radius-top: 0; radius-bottom: 0.5" material="color: grey"></a-mixin>
        <a-mixin id="yoyo" attribute="position" direction="alternate"
                 dur="3000" fill="forwards" repeat="indefinite"></a-mixin>
      </a-assets>

      <!-- Need a cursor in order to get 'click' events. -->
      <a-entity position="0 1.8 2">
        <a-camera look-controls>
          <a-cursor position="0 0 -1.25"
            geometry="primitive: ring; radiusOuter: 0.075;
                      radiusInner: 0.05;"
            material="color: cyan; shader: flat"
            maxDistance="30" fuse="false"></a-cursor>
        </a-camera>
      </a-entity>
      <a-entity id="cone1" mixin="cone" position="-0.5 0 0">
        <a-animation mixin="yoyo" to="-0.5 2.0 0"></a-animation>
      </a-entity>
      <a-entity id="cone2" mixin="cone" position="0.5 0 0" rotation="0 0 180">
        <a-animation mixin="yoyo" to="0.5 2.0 0"></a-animation>
      </a-entity>
    </a-scene>
  </body>
  <script>

    var changeColorRandom = function(el) {
      var rand = function() { return Math.floor(Math.random() * 255)};
      el.setAttribute('material', 'color', 'rgb('+rand()+','+rand()+','+rand()+')');
    }

    // Testing listening on the entity.
    var cone1 = document.querySelector('#cone1');
    cone1.addEventListener('click', function(event) {
      changeColorRandom(event.target);
    });

    // Testing listening on the cursor.
    var cone2 = document.querySelector('#cone2');
    var cursor = document.querySelector('a-cursor');
    cursor.addEventListener('click', function(event) {
      var intersectedEl = event.detail.target;
      if (intersectedEl && intersectedEl.object3D.uuid === cone2.object3D.uuid) {
        changeColorRandom(intersectedEl);
      }
    });

  </script>
</html>
